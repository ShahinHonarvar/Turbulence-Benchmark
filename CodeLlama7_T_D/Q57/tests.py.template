from Q57.$3_results_$4.Folder_$1.generated_answer import $2
import numpy as np
from numpy import matrix
import warnings
from functools import wraps


def ignore_warnings(f):
    @wraps(f)
    def inner(*args, **kwargs):
        with warnings.catch_warnings(record=True) as w:
            warnings.simplefilter("ignore")
            response = f(*args, **kwargs)
        return response
    return inner


@ignore_warnings
def test_matrix_of_single_number_equal_to_sum():
    input_matrix = np.matrix([[$0]])
    assert $2(input_matrix) == [[[$0]]]


@ignore_warnings
def test_matrix_of_single_number_unequal_to_sum():
    input_matrix = np.matrix([[$0 - 1]])
    assert not $2(input_matrix)


@ignore_warnings
def test_matrix_of_several_numbers():
    if $0 <= 0:
        row = '1 2 3 4 5 6 7 8 9'
        input_matrix = np.matrix(f'{row}; {row}; {row}')
    else:
        row = '-1 -2 -3 -4 -5 -6 -7 -8 -9'
        input_matrix = np.matrix(f'{row}; {row}; {row}')
    assert not $2(input_matrix)


@ignore_warnings
def test_small_matrix_of_all_zeros():
    row = '0 0'
    input_matrix = np.matrix(f'{row}; {row}')
    output = $2(input_matrix)
    if $0 == 0:
        assert len(output) == 9
    else:
        assert len(output) == 0

        
@ignore_warnings
def test_matrix_of_single_number_and_zeros():
    if $0 == 0:
        element = 1
    else:
        element = 0
    for i in range(1, 11):
        mat = ''
        for j in range(i):
            row = (f'{element} ' * i) + ';'
            mat += row
        mat = mat[:-1]
        mat = np.matrix(mat)
        mat[0, 0] = $0
        if $0 == 0:
            assert len($2(mat)) == 1
        else:
            assert len($2(mat)) == i * i


@ignore_warnings
def test_dimension_of_submatrices():
    if $0 == 0:
        element = 1
    else:
        element = 0
    for i in range(1, 11):
        mat = ''
        for j in range(i):
            row = (f'{element} ' * i) + ';'
            mat += row
        mat = mat[:-1]
        mat = np.matrix(mat)
        mat[0, 0] = $0
        output = $2(mat)
        for m in output:
            m = np.asmatrix(m)
            assert m.shape <= mat.shape
